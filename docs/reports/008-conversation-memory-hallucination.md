# Report 008: –ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞

**–î–∞—Ç–∞**: 2025-10-10
**Trace ID**: `ad7d1a16-7dad-4fee-a22c-ed30de974aab`
**–°—Ç–∞—Ç—É—Å**: üîÑ –ß–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ø—Ä–æ—Å–∏–ª: "–ö–∞–∫–∏–µ —É –º–µ–Ω—è –µ—Å—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏?"

**–†–µ–∞–ª—å–Ω–æ—Å—Ç—å** (vault/tasks/): 17 —Ñ–∞–π–ª–æ–≤ –∑–∞–¥–∞—á
**–û—Ç–≤–µ—Ç Kira**: "–£ —Ç–µ–±—è —Å–µ–π—á–∞—Å –≤—Å–µ–≥–æ 2 –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏"

### –û—Ç–∫—É–¥–∞ Kira –≤–∑—è–ª–∞ "2 –∑–∞–¥–∞—á–∏"?

**–ò–ó –ò–°–¢–û–†–ò–ò –†–ê–ó–ì–û–í–û–†–ê!** –ù–µ –∏–∑ vault!

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—É—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

```
1. User: "–ö–∞–∫–∏–µ —É –º–µ–Ω—è –µ—Å—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏?"
2. Loading 20 messages from memory
3. Planning phase ‚Üí LLM –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞–Ω–∞
4. ‚ùå ERROR: Failed to parse plan JSON: Expecting value: line 1 column 1 (char 0)
5. ‚Üí Routing ‚Üí "respond" (–Ω–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
6. Response generation –ë–ï–ó –í–´–ó–û–í–ê task_list
7. LLM –≤–∏–¥–∏—Ç:
   - EXECUTION RESULTS: (–ø—É—Å—Ç–æ!)
   - –ò—Å—Ç–æ—Ä–∏—è: "–£ —Ç–µ–±—è —Å–µ–π—á–∞—Å 16 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á" (—Å—Ç–∞—Ä—ã–π –æ—Ç–≤–µ—Ç)
   - –ò—Å—Ç–æ—Ä–∏—è: —Ä–∞–∑–≥–æ–≤–æ—Ä –æ–± —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á
8. LLM "–æ–±–Ω–æ–≤–ª—è–µ—Ç" –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é: "–£ —Ç–µ–±—è —Å–µ–π—á–∞—Å 2 –∑–∞–¥–∞—á–∏"
```

### –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç—ã:

```python
# –õ–æ–≥
"Failed to parse plan JSON: Expecting value: line 1 column 1 (char 0)"
‚Üí –≠—Ç–æ –∑–Ω–∞—á–∏—Ç LLM –≤–µ—Ä–Ω—É–ª –ü–£–°–¢–û–ô –æ—Ç–≤–µ—Ç –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON

# –ù–ò –û–î–ò–ù –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ù–ï –≤—ã–ø–æ–ª–Ω–∏–ª—Å—è!
"Tool task_list" - –ù–ï –ù–ê–ô–î–ï–ù–û –≤ –ª–æ–≥–∞—Ö

# HTTP –æ—Ç–≤–µ—Ç –æ—Ç LLM
Content-Length: 412 bytes  # –û—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏–π –æ—Ç–≤–µ—Ç!
```

### –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ (20 —Å–æ–æ–±—â–µ–Ω–∏–π!):

```
History[0]: user - "–ö–∞–∫–∏–µ —É –º–µ–Ω—è –µ—Å—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏"
History[1]: assistant - "–£ —Ç–µ–±—è —Å–µ–π—á–∞—Å 16 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á:"  ‚Üê –°–¢–ê–†–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
History[2]: user - "–£–¥–∞–ª–∏ –∑–∞–¥–∞—á—É My first task"
History[3]: assistant - "–ò–∑–≤–∏–Ω–∏, –Ω–æ —è –Ω–µ —Å–º–æ–≥–ª–∞ —É–¥–∞–ª–∏—Ç—å..."
...
History[20]: user - "–ö–∞–∫–∏–µ —É –º–µ–Ω—è –µ—Å—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏?" ‚Üê –ù–û–í–´–ô –ó–ê–ü–†–û–°
```

## –ö–æ—Ä–Ω–µ–≤—ã–µ –ø—Ä–∏—á–∏–Ω—ã

### 1. LLM –≤–µ—Ä–Ω—É–ª –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON –ø—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (20 —Å–æ–æ–±—â–µ–Ω–∏–π + system prompt)
- Token limit –¥–æ—Å—Ç–∏–≥–Ω—É—Ç
- LLM "–∑–∞–ø—É—Ç–∞–ª—Å—è" –≤ –∏—Å—Ç–æ—Ä–∏–∏
- –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–æ–º–ø—Ç–æ–º

### 2. respond_node –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ tool_results

**–ö–æ–¥ (–¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):**
```python
def respond_node(state: AgentState, llm_adapter: LLMAdapter):
    context_parts = []

    if state.tool_results:  # –ï—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∏—Ö

    if state.error:  # –ï—Å—Ç—å –æ—à–∏–±–∫–∞
        # –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç

    # –ù–æ –µ—Å–ª–∏ –ù–ï–¢ –Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –Ω–∏ –æ—à–∏–±–∫–∏?
    # ‚Üí LLM –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Ä–∞–∑–≥–æ–≤–æ—Ä–∞!
```

### 3. –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ "–∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã"

LLM –≤ `respond_node` –ø–æ–ª—É—á–∞–µ—Ç:
```
Messages:
1. System prompt: "–ë—É–¥—å –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–π –∏ —á–µ—Å—Ç–Ω–æ–π"
2. –ò—Å—Ç–æ—Ä–∏—è (20 —Å–æ–æ–±—â–µ–Ω–∏–π): "–£ —Ç–µ–±—è 16 –∑–∞–¥–∞—á... –£–¥–∞–ª–∏ My first task..."
3. Context: EXECUTION RESULTS: (–ø—É—Å—Ç–æ!)

LLM –¥—É–º–∞–µ—Ç: "–†–∞–∑ –Ω–µ—Ç –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –æ–±–Ω–æ–≤–ª—é —Å—Ç–∞—Ä—ã–µ.
–ë—ã–ª–æ 16 –∑–∞–¥–∞—á, —É–¥–∞–ª—è–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ ‚Üí —Å–µ–π—á–∞—Å ~2 –∑–∞–¥–∞—á–∏"
```

### 4. –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∞—è –∏—Å—Ç–æ—Ä–∏—è (20 —Å–æ–æ–±—â–µ–Ω–∏–π)

- –ó–∞–Ω–∏–º–∞–µ—Ç –º–Ω–æ–≥–æ tokens
- –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—é context window
- –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç latency
- –°–Ω–∏–∂–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞–Ω–∞

## –†–µ—à–µ–Ω–∏–µ

### 1. ‚úÖ –î–µ—Ç–µ–∫—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è tool_results

```python
# CRITICAL: Check if we have ANY tool results
if not state.tool_results and not state.error:
    logger.warning(f"NO TOOL RESULTS and NO ERROR - possible hallucination!")
    state.error = "–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é (–æ—à–∏–±–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)"
```

### 2. ‚úÖ –Ø–≤–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ LLM

```python
if state.error and not state.tool_results:
    context_parts.append("\n‚ùå NO TOOLS WERE EXECUTED!")
    context_parts.append("‚ùå DO NOT use conversation history - you have NO REAL DATA!")
    context_parts.append("‚ùå Tell user honestly that you couldn't get the information!")
```

### 3. üîÑ TODO: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞

```python
# –í–º–µ—Å—Ç–æ 20 —Å–æ–æ–±—â–µ–Ω–∏–π - –±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ N
MAX_HISTORY_MESSAGES = 6  # 3 –ø–∞—Ä—ã user-assistant

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å summarization –¥–ª—è —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
if len(messages) > MAX_HISTORY_MESSAGES:
    old_messages = messages[:-MAX_HISTORY_MESSAGES]
    summary = summarize_messages(old_messages)
    messages = [summary] + messages[-MAX_HISTORY_MESSAGES:]
```

### 4. üîÑ TODO: –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```python
# –ï—Å–ª–∏ LLM –≤–µ—Ä–Ω—É–ª –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON
except json.JSONDecodeError as e:
    # –ü–æ–ø—ã—Ç–∫–∞ #2: —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç –±–µ–∑ –∏—Å—Ç–æ—Ä–∏–∏
    if retry_count < 1:
        logger.info("Retrying with simplified prompt...")
        simplified_prompt = get_simplified_planning_prompt()
        return plan_with_prompt(simplified_prompt, user_request)
    else:
        # –ß–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞
        return {
            "error": "–ù–µ –º–æ–≥—É —Å–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ",
            "plan": [],
            "status": "error"
        }
```

### 5. üîÑ TODO: Fallback –∫ –ø—Ä—è–º–æ–º—É –≤—ã–∑–æ–≤—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞

```python
# –ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–ª–∏–ª–æ—Å—å, –Ω–æ –∑–∞–ø—Ä–æ—Å –ø—Ä–æ—Å—Ç–æ–π
if "–∫–∞–∫–∏–µ –∑–∞–¥–∞—á–∏" in user_request.lower():
    # –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ –±–µ–∑ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    return direct_tool_call("task_list", {})
```

## –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π: –û—à–∏–±–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```
User: "–ö–∞–∫–∏–µ —É –º–µ–Ω—è –∑–∞–¥–∞—á–∏?"

Kira (–≤–Ω—É—Ç—Ä–∏):
1. Planning ‚Üí ‚ùå ERROR (invalid JSON)
2. state.error = "–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é"
3. Routing ‚Üí "respond"
4. respond_node:
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: tool_results? –ù–ï–¢
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: error? –î–ê
   - Context: "‚ùå NO TOOLS EXECUTED! DO NOT use conversation history!"

Kira (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é):
"–ò–∑–≤–∏–Ω–∏, —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏.
–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: –ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é (–æ—à–∏–±–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)"
```

## –ú–µ—Ç—Ä–∏–∫–∏

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- **Hallucination on Empty Results**: 100% (–≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Å—Ç–æ—Ä–∏—é)
- **User Confusion**: –í—ã—Å–æ–∫–∞—è (–æ—Ç–≤–µ—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏)

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–æ–∂–∏–¥–∞–µ—Ç—Å—è)

- **Hallucination on Empty Results**: 0% (—è–≤–Ω–∞—è –æ—à–∏–±–∫–∞ –≤–º–µ—Å—Ç–æ –≤—ã–¥—É–º–∫–∏)
- **User Trust**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ (—á–µ—Å—Ç–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ "–∫—Ä–∞—Å–∏–≤–æ–≥–æ" –æ—Ç–≤–µ—Ç–∞)

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```python
# –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —á–∞—Å—Ç–æ—Ç—É –æ—à–∏–±–æ–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
planning_errors_per_hour = ...

if planning_errors_per_hour > THRESHOLD:
    alert("High planning failure rate! Check LLM provider or prompts")
```

### 2. A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏

```
–ì—Ä—É–ø–ø–∞ A: max_history=20
–ì—Ä—É–ø–ø–∞ B: max_history=6

–ú–µ—Ç—Ä–∏–∫–∏:
- Planning success rate
- Response quality
- Latency
```

### 3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

```python
# "–ö–∞–∫–∏–µ –∑–∞–¥–∞—á–∏?" - —á–∞—Å—Ç—ã–π –∑–∞–ø—Ä–æ—Å
# –ú–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç task_list –Ω–∞ 1-2 –º–∏–Ω—É—Ç—ã
if is_frequent_query(user_request):
    cached_result = get_cached_tool_result("task_list")
    if cached_result and not is_stale(cached_result):
        return cached_result
```

### 4. –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

```python
# –ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–ª–∏–ª–æ—Å—å - —É–ø—Ä–æ—Å—Ç–∏—Ç—å
class SimpleExecutor:
    """Fallback executor –±–µ–∑ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è."""

    def execute(self, user_request):
        # –ü—Ä—è–º–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ: –∑–∞–ø—Ä–æ—Å ‚Üí –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
        if "–∫–∞–∫–∏–µ –∑–∞–¥–∞—á–∏" in request.lower():
            return self.call_tool("task_list", {})
        elif "—Å–æ–∑–¥–∞–π –∑–∞–¥–∞—á—É" in request.lower():
            return self.call_tool("task_create", extract_args(request))
        # ...
```

## –í—ã–≤–æ–¥—ã

1. **–ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ - –∏—Å—Ç–æ—á–Ω–∏–∫ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π** –∫–æ–≥–¥–∞ –Ω–µ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–î–µ—Ç–µ–∫—Ü–∏—è –ø—É—Å—Ç—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫—Ä–∏—Ç–∏—á–Ω–∞** - –ª—É—á—à–µ —Å–∫–∞–∑–∞—Ç—å "–Ω–µ –∑–Ω–∞—é"
3. **–°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤—Ä–µ–¥–∏—Ç** - –Ω—É–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ
4. **Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã –≤–∞–∂–Ω—ã** - –∫–æ–≥–¥–∞ LLM "–Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è"
5. **–ß–µ—Å—Ç–Ω–æ—Å—Ç—å > –£–¥–æ–±—Å—Ç–≤–æ** - –ª—É—á—à–µ –ø—Ä–∏–∑–Ω–∞—Ç—å –æ—à–∏–±–∫—É

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –î–µ—Ç–µ–∫—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è tool_results
2. ‚úÖ –Ø–≤–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ LLM
3. ‚è≥ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ (–º–∞–∫—Å. 6-10 —Å–æ–æ–±—â–µ–Ω–∏–π)
4. ‚è≥ Retry —Å —É–ø—Ä–æ—â–µ–Ω–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º
5. ‚è≥ Fallback –∫ –ø—Ä—è–º–æ–º—É –≤—ã–∑–æ–≤—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
6. ‚è≥ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–∞—Å—Ç–æ—Ç—ã –æ—à–∏–±–æ–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
7. ‚è≥ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏

---

**–°—Ç–∞—Ç—É—Å**: –ß–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ. –¢–µ–ø–µ—Ä—å Kira —Å–∫–∞–∂–µ—Ç "–Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å" –≤–º–µ—Å—Ç–æ –≤—ã–¥—É–º–∫–∏.
**–¢—Ä–µ–±—É–µ—Ç—Å—è**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

