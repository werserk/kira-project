---
type: decision
id: ADR-009
title: Pipelines as thin orchestration (adapters↔plugins)
date: 2025-09-19
status: accepted
owners: [kira-core]
drivers: [простота, наблюдаемость, переиспользование]
---

## Контекст

Нужна явная склейка источников событий и действий плагинов.

## Решение

- Пайплайны содержат только маршрутизацию и ретраи; бизнес‑логика — в плагинах.
- Стандартные пайплайны: `inbox_pipeline`, `sync_pipeline`, `rollup_pipeline`.

## Альтернативы

- «Бог‑пайплайны» с бизнес‑логикой → трудно тестировать/расширять → отклонено.

## Реализация

- Единая телеметрия (JSONL) и `trace_id` для всего пути события.

## Риски

- Слишком много пайплайнов → каталог и правила именования.

## Метрики/DoD

- Любой EtE сценарий прослеживается по одному `trace_id` в логах.
