---
type: decision
id: ADR-001
title: Monorepo with src-layout and co-located built-in plugins
date: 2025-09-19
status: accepted
owners: [werserk]
related: []
drivers: [скорость итераций, единый CI, контракты SDK, упрощённый онбординг]
---

## Контекст

Нужна плагинная платформа, но на старте важны скорость и единая поставка. Разделение на мульти-репо преждевременно.

## Решение

- Дерево репо: `src/kira/{core,plugin_sdk,adapters,pipelines,cli,plugins}` + `docs`, `tests`, `logs`.
- Встроенные плагины живут в `src/kira/plugins/*`, собираются как отдельные пакеты (wheel) для будущего выноса.
- Единый CI: линтеры, типизация, тесты (unit+integration).

## Альтернативы

- Мульти-репо с первого дня — высокие накладные расходы, сложная координация API → отклонено на MVP.

## Реализация/Миграция

- Инициализировать структуру; включить pre-commit, Ruff, Black, mypy, pytest.
- Создать каркас «inbox», «calendar», «deadlines» как встроенные плагины.

## Риски

- Разрастание монорепо → позже вынесем плагины по мере стабилизации SDK.

## Метрики/DoD

- CI зелёный; сборка wheels для плагинов проходит; 0 «магических» импортов между плагинами.
